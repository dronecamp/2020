# Meet the Instructors

```{r read_instructors, include=FALSE}
if (params$download_instr) {
  library(googlesheets4)
  gs4_auth(email = "andlyons@ucdavis.edu")
  dc20_instr_id <- "1h7ZY_iuB17Jx238E4_t-4fmGys9Fdn7UlgNFvu8fhnc"
  dc20_instr_tbl <- googlesheets4::range_read(ss = dc20_instr_id, 
                                              sheet = "Instructors", range = NULL)
  save(dc20_instr_tbl, file="instructors.RData")
  
} else {
  load("instructors.RData")
}
```

```{r instructors_print, results="asis", echo=FALSE}
library(htmltools)

for (i in 1:nrow(dc20_instr_tbl)) {
  instr_name <- dc20_instr_tbl$name[i]
  
  ## If we wanted the name to appeari in the TOC, add the name as markup
  ## cat("## ", instr_name, "\n")

  print(h2(instr_name, id = dc20_instr_tbl$initials[i], style="clear:both;"))
  
  instr_bio <- dc20_instr_tbl$bio[i]
  instr_profile_url <- dc20_instr_tbl$profile_url[i]
  
  ## Swap out the first occurence of the instructor's name with a hyperlink
  if (!is.na(instr_profile_url)) {
    ## Construct the hyperlink    
    instr_href <- paste0("<a href=\"", instr_profile_url, 
                         "\" target=\"_blank\" rel=\"noopener\">", 
                         instr_name, "</a>" )
    
    ## Make the swap
    instr_bio <- sub(instr_name, instr_href, instr_bio)
    
  }
  
  ## Construct the img tag
  instr_photo <- dc20_instr_tbl$photo[i]
  
  if (is.na(instr_photo)) {
    instr_img <- ""
  } else {
    instr_img <- paste0("<img src=\"images/instructors/", instr_photo, 
                        "\" style=\"width:220px; height: 220px; float:right; padding:10px;\"/>")
  }
  
  print(p(HTML(paste0(instr_img, instr_bio))))


}
```

